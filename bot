import logging
import requests
import schedule
import time
from telegram import Bot
pip install -r requirements.txt


TOKEN = "token_bot"
CHAT_ID = "chave_link"  # Substitua pelo seu ID
NEWS_API_KEY = "api"

bot = Bot(token=TOKEN)

def get_coffee_news():
    url = f"https://newsapi.org/v2/everything?q=caf√© OR coffee&language=pt&sortBy=publishedAt&apiKey={NEWS_API_KEY}"
    response = requests.get(url).json()
    articles = response.get("articles", [])[:5]
    
    news_text = "‚òï *Bom dia! √öltimas not√≠cias sobre caf√©:*\n\n"
    for article in articles:
        news_text += f"üîπ *{article['title']}* - {article['source']['name']}\n{article['url']}\n\n"
    
    return news_text if articles else "Nenhuma not√≠cia recente encontrada."

def send_news():
    try:
        news = get_coffee_news()
        bot.send_message(chat_id=CHAT_ID, text=news, parse_mode="Markdown")
        print("Not√≠cia enviada com sucesso!")
    except Exception as e:
        print(f"Erro ao enviar not√≠cia: {e}")

# Agendar envio di√°rio √†s 08:00
schedule.every().day.at("08:00").do(send_news)

print("Bot est√° rodando e enviar√° not√≠cias √†s 08:00 diariamente.")

# Loop infinito para manter o agendador rodando
while True:
    schedule.run_pending()
    time.sleep(60)  # Checa a cada minuto
